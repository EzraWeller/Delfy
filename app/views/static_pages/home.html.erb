<% if logged_in? %>
	<header>
		<div class="logo"><h1>Delfy</h1></div>
		<div class= "top-nav">
			<div>Your communities:</div>
			<div id="community_selector">
				<% current_user.communities.each do |c| %>
					<div class="community-select-button-div"><%= button_to "#{c.name}", select_community_path(@community),
					    	{ params: {community_id: c.id}, :disabled => current_community == c, 
					    	remote: true , form_class: 'community-select-button'} %></div>
				<% end %>
			</div>
		</div>
	</header>
	<section class="main">
		<div class="sidebar">
			<div><%= render 'shared/user_chunk' %></div>
			<div><%= link_to "Create Community", new_community_path %></div>
			<div><%= link_to "Find Community", communities_path %></div>
			<div>
				<% if @user.admin %>
					<%= link_to "Users Index (admin only)", users_path %>
				<% else %>
				<% end %>
			</div>
			<div><%= link_to "Log out", logout_path, method: :delete %></div>
		</div>
		<div class="feed">
			<% flash.each do |message_type, message| %>
				<div class="alert alert-<%= message_type %>"><%= message %></div>
			<% end %>
			<div id="community_feed"><%= render 'shared/community_feed' if current_user.communities.exists? %></div>
		</div>
	</section>
<% else %>
		<h1 class="title">Delfy</h1>
		<div class="login-links">
			<% flash.each do |message_type, message| %>
				<div class="alert alert-<%= message_type %>"><%= message %></div>
			<% end %>
			<p><%= link_to "Sign up",    signup_path %></p>
			<p><%= link_to "Log in",     login_path %></p>
		</div>
<% end %>
<footer></footer>