<% flash.each do |message_type, message| %>
	<div class="alert alert-<%= message_type %>"><%= message %></div>
<% end %>



<h1><%= link_to current_community.name, community_path(current_community) %></h1>
<p><%= current_community.description %></p>
<p><strong class="stat"><%= current_community.users.count %></strong> members</p>

<div class="idea-form"><%= render 'ideas/idea_form' %></div>

<% if current_community.ideas.exists? %>
	<div class="sort-buttons" id="idea_sort_buttons">
		<div>Sort by:</div>
		<div class="sort-button"><%= button_to "Top", sort_ideas_path, params: {sort_style: :votes_count}, 
			:disabled => idea_sort_style == "votes_count", remote: true %></div>
		<div class="sort-button"><%= button_to "New", sort_ideas_path, params: {sort_style: :created_at}, 
			:disabled => idea_sort_style == "created_at", remote: true %></div>
		<div class="sort-button">
			<%= form_tag search_ideas_path, method: :get, remote: true do %>
				<p>
					<%= text_field_tag :search, params[:search] %>
					<%= hidden_field_tag :community_id, current_community.id %>
					<%= submit_tag "Search", name: nil %>
				</p>
			<% end %>
		</div>
	</div>
<% else %>
	<div>No ideas have been submitted yet!</div>
<% end %>

<div id="idea_feed">
	<%= render 'ideas/idea_feed' %>
</div>